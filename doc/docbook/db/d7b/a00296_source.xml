<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_a00296_source" xml:lang="en-US">
<title>sample_representative.c</title>
<indexterm><primary>src/sample_representative.c</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_a00296_source_1l00001"/>00001 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_a00092">predictor/sample_representative.h</link>&quot;</emphasis>
<anchor xml:id="_a00296_source_1l00002"/>00002 
<anchor xml:id="_a00296_source_1l00003"/>00003 
<anchor xml:id="_a00296_source_1l00004"/>00004 <emphasis role="comment">//&#32;TODO&#32;REMOVE,&#32;Use&#32;GetPixel&#32;instaed</emphasis>
<anchor xml:id="_a00296_source_1l00005"/><link linkend="_a00092_1aca1581c921d082976e7f116aa52c56f0">00005</link> <link linkend="_a00149_1a5acabcf9a2b0d843de53680562e2f639">data_t</link>&#32;<link linkend="_a00296_1aca1581c921d082976e7f116aa52c56f0">SampleRepresentative</link>(uint16_t&#32;sample_value){
<anchor xml:id="_a00296_source_1l00006"/>00006 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;sample_value;
<anchor xml:id="_a00296_source_1l00007"/>00007 }
<anchor xml:id="_a00296_source_1l00008"/>00008 
<anchor xml:id="_a00296_source_1l00009"/><link linkend="_a00092_1a14cff7c59ac94b0387e8b95a433521e9">00009</link> uint16_t&#32;<link linkend="_a00296_1a14cff7c59ac94b0387e8b95a433521e9">PredictedSample</link>(uint32_t&#32;double_resolution_predicted_sample){
<anchor xml:id="_a00296_source_1l00010"/>00010 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;double_resolution_predicted_sample&#32;/&#32;2;
<anchor xml:id="_a00296_source_1l00011"/>00011 }
<anchor xml:id="_a00296_source_1l00012"/>00012 
<anchor xml:id="_a00296_source_1l00013"/><link linkend="_a00092_1a6c60474c610dc64773816bc445efeb77">00013</link> uint32_t&#32;<link linkend="_a00296_1a6c60474c610dc64773816bc445efeb77">DoubleResolutionPredictedSample</link>(<link linkend="_a00380">image</link>*&#32;hIMG,&#32;<link linkend="_a00152_1affb1df897d26e77d96c613bea67825c6">INDEX</link>&#32;z,&#32;<link linkend="_a00152_1affb1df897d26e77d96c613bea67825c6">INDEX</link>&#32;y,&#32;<link linkend="_a00152_1affb1df897d26e77d96c613bea67825c6">INDEX</link>&#32;x,&#32;int64_t&#32;high_resolution_predicted_sample){
<anchor xml:id="_a00296_source_1l00014"/>00014 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(x&#32;&gt;&#32;0&#32;||&#32;y&#32;&gt;&#32;0){&#32;<emphasis role="comment">//&#32;?&#32;Substitute&#32;for&#32;t&gt;0</emphasis>
<anchor xml:id="_a00296_source_1l00015"/>00015 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;(high_resolution_predicted_sample&#32;/&#32;(int64_t)&#32;<link linkend="_a00152_1a60b4b9f1152371307ebadc232149699c">BPOW</link>(<link linkend="_a00146_1a515cdf0341e52056bcea8e46c952ee82">Omega</link>&#32;+&#32;1));
<anchor xml:id="_a00296_source_1l00016"/>00016 &#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;((x&#32;==&#32;0&#32;&amp;&amp;&#32;y&#32;==&#32;0)&#32;&amp;&amp;&#32;<link linkend="_a00146_1a21c169290a6c782855c778bb7a0389b9">kP</link>&#32;&gt;&#32;0&#32;&amp;&amp;&#32;z&#32;&gt;&#32;0)&#32;<emphasis role="comment">//&#32;?&#32;Substitute&#32;for&#32;t&#32;==&#32;0</emphasis>
<anchor xml:id="_a00296_source_1l00017"/>00017 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a00296_source_1l00018"/>00018 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;2&#32;*&#32;<link linkend="_a00113_1a582f5034cfb025614b418984a00e2e5c">S</link>(hIMG,&#32;z-1,y,x);
<anchor xml:id="_a00296_source_1l00019"/>00019 &#32;&#32;&#32;&#32;}&#32;<emphasis role="keywordflow">else</emphasis>&#32;<emphasis role="keywordflow">if</emphasis>&#32;((x&#32;==&#32;0&#32;&amp;&amp;&#32;y&#32;==&#32;0)&#32;&amp;&amp;&#32;(<link linkend="_a00146_1a21c169290a6c782855c778bb7a0389b9">kP</link>&#32;==&#32;0&#32;||&#32;z&#32;==&#32;0))&#32;<emphasis role="comment">//&#32;?&#32;Substitute&#32;for&#32;t&#32;==&#32;0</emphasis>
<anchor xml:id="_a00296_source_1l00020"/>00020 &#32;&#32;&#32;&#32;{
<anchor xml:id="_a00296_source_1l00021"/>00021 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;2&#32;*&#32;<link linkend="_a00146_1a0dca58ddf3108a022c36b549baa6ec46">kSmid</link>;
<anchor xml:id="_a00296_source_1l00022"/>00022 &#32;&#32;&#32;&#32;}
<anchor xml:id="_a00296_source_1l00023"/>00023 &#32;&#32;&#32;&#32;
<anchor xml:id="_a00296_source_1l00024"/>00024 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;0;
<anchor xml:id="_a00296_source_1l00025"/>00025 }
<anchor xml:id="_a00296_source_1l00026"/>00026 
<anchor xml:id="_a00296_source_1l00027"/><link linkend="_a00092_1a441e8d0fe639d45889aab5b88c4138f4">00027</link> int64_t&#32;<link linkend="_a00296_1a441e8d0fe639d45889aab5b88c4138f4">HighResolutionPredictedSample</link>(int64_t&#32;predicted_central_local_difference,&#32;uint32_t&#32;local_sum){
<anchor xml:id="_a00296_source_1l00028"/>00028 &#32;&#32;&#32;&#32;int64_t&#32;temp1&#32;=&#32;(int64_t)predicted_central_local_difference&#32;+&#32;(int64_t)&#32;<link linkend="_a00152_1a60b4b9f1152371307ebadc232149699c">BPOW</link>(<link linkend="_a00146_1a515cdf0341e52056bcea8e46c952ee82">Omega</link>)&#32;*&#32;((int64_t)&#32;local_sum&#32;-&#32;(int64_t)&#32;(4&#32;*&#32;<link linkend="_a00146_1a0dca58ddf3108a022c36b549baa6ec46">kSmid</link>));
<anchor xml:id="_a00296_source_1l00029"/>00029 &#32;&#32;&#32;&#32;int64_t&#32;mod&#32;=&#32;(temp1&#32;+&#32;(1L&#32;&lt;&lt;&#32;(<link linkend="_a00146_1a43cf89f028c6b6ad01038627b83a84c0">kR</link>-1)))&#32;%&#32;(1L&#32;&lt;&lt;&#32;(<link linkend="_a00146_1a43cf89f028c6b6ad01038627b83a84c0">kR</link>));
<anchor xml:id="_a00296_source_1l00030"/>00030 &#32;&#32;&#32;&#32;mod&#32;=&#32;(mod&#32;&lt;&#32;0)&#32;?&#32;(mod&#32;+&#32;(1L&#32;&lt;&lt;&#32;(<link linkend="_a00146_1a43cf89f028c6b6ad01038627b83a84c0">kR</link>)))&#32;:&#32;mod;
<anchor xml:id="_a00296_source_1l00031"/>00031 &#32;&#32;&#32;&#32;int64_t&#32;temp2&#32;=&#32;mod&#32;-&#32;(1L&#32;&lt;&lt;&#32;(<link linkend="_a00146_1a43cf89f028c6b6ad01038627b83a84c0">kR</link>&#32;-&#32;1));<emphasis role="comment">//MOD(temp1,&#32;((int64_t)&#32;kR));</emphasis>
<anchor xml:id="_a00296_source_1l00032"/>00032 &#32;&#32;&#32;&#32;int64_t&#32;temp3&#32;=&#32;temp2&#32;+&#32;(int64_t)&#32;<link linkend="_a00152_1a60b4b9f1152371307ebadc232149699c">BPOW</link>(<link linkend="_a00146_1a515cdf0341e52056bcea8e46c952ee82">Omega</link>&#32;+&#32;2)&#32;*&#32;(int64_t)&#32;<link linkend="_a00146_1a0dca58ddf3108a022c36b549baa6ec46">kSmid</link>&#32;+&#32;(int64_t)&#32;<link linkend="_a00152_1a60b4b9f1152371307ebadc232149699c">BPOW</link>(<link linkend="_a00146_1a515cdf0341e52056bcea8e46c952ee82">Omega</link>&#32;+&#32;1);
<anchor xml:id="_a00296_source_1l00033"/>00033 
<anchor xml:id="_a00296_source_1l00034"/>00034 &#32;&#32;&#32;&#32;int64_t&#32;hrps_max&#32;=&#32;<link linkend="_a00152_1a60b4b9f1152371307ebadc232149699c">BPOW</link>(<link linkend="_a00146_1a515cdf0341e52056bcea8e46c952ee82">Omega</link>+2)&#32;*&#32;(int64_t)&#32;<link linkend="_a00146_1a8329a1a244af278852519dfccd0d4814">kSmax</link>&#32;+&#32;<link linkend="_a00152_1a60b4b9f1152371307ebadc232149699c">BPOW</link>(<link linkend="_a00146_1a515cdf0341e52056bcea8e46c952ee82">Omega</link>+1);
<anchor xml:id="_a00296_source_1l00035"/>00035 &#32;&#32;&#32;&#32;int64_t&#32;hrps_min&#32;=&#32;<link linkend="_a00152_1a60b4b9f1152371307ebadc232149699c">BPOW</link>(<link linkend="_a00146_1a515cdf0341e52056bcea8e46c952ee82">Omega</link>&#32;+&#32;2)&#32;*&#32;<link linkend="_a00146_1add3510c03fbe63c1b97c67aac517c930">kSmin</link>;
<anchor xml:id="_a00296_source_1l00036"/>00036 
<anchor xml:id="_a00296_source_1l00037"/>00037 &#32;&#32;&#32;&#32;int64_t&#32;temp&#32;=&#32;<link linkend="_a00152_1a816dcf31e408d445ca8275ad96e6eb1e">CLIP</link>(temp3,&#32;hrps_min,&#32;hrps_max);
<anchor xml:id="_a00296_source_1l00038"/>00038 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;temp;
<anchor xml:id="_a00296_source_1l00039"/>00039 }
</programlisting></section>
