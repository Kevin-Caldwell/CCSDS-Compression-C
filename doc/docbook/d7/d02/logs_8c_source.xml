<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_logs_8c_source" xml:lang="en-US">
<title>logs.c</title>
<indexterm><primary>src/logs.c</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="_logs_8c_source_1l00001"/>00001 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_logs_8h">files/logs.h</link>&quot;</emphasis>
<anchor xml:id="_logs_8c_source_1l00002"/>00002 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_global__constants_8h">constants/global_constants.h</link>&quot;</emphasis>
<anchor xml:id="_logs_8c_source_1l00003"/>00003 <emphasis role="preprocessor">#include&#32;&lt;time.h&gt;</emphasis>
<anchor xml:id="_logs_8c_source_1l00004"/>00004 <emphasis role="preprocessor">#include&#32;&lt;string.h&gt;</emphasis>
<anchor xml:id="_logs_8c_source_1l00005"/>00005 
<anchor xml:id="_logs_8c_source_1l00006"/><link linkend="_global__constants_8h_1a87e78d2e71f0d53d7886e1a126f39b16">00006</link> <emphasis role="keywordtype">char</emphasis>&#32;<link linkend="_logs_8c_1a87e78d2e71f0d53d7886e1a126f39b16">log_file</link>[]&#32;=&#32;<emphasis role="stringliteral">&quot;data/logs/compressor.logs&quot;</emphasis>;
<anchor xml:id="_logs_8c_source_1l00007"/><link linkend="_logs_8c_1a43a0859253a66e6836e73685d3dcc623">00007</link> <emphasis role="keywordtype">char</emphasis>&#32;<link linkend="_logs_8c_1a43a0859253a66e6836e73685d3dcc623">_time_str</link>[100];
<anchor xml:id="_logs_8c_source_1l00008"/>00008 
<anchor xml:id="_logs_8c_source_1l00009"/><link linkend="_logs_8c_1a89eb41300c751659cb27ad5955449bdc">00009</link> <emphasis role="keywordtype">char</emphasis>*&#32;<link linkend="_logs_8c_1a89eb41300c751659cb27ad5955449bdc">_GET_PRINT_TIME</link>(){
<anchor xml:id="_logs_8c_source_1l00010"/>00010 &#32;&#32;&#32;&#32;time_t&#32;rt&#32;=&#32;time((time_t*)&#32;<link linkend="_math__functions_8h_1a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</link>);
<anchor xml:id="_logs_8c_source_1l00011"/>00011 &#32;&#32;&#32;&#32;strftime(<link linkend="_logs_8c_1a43a0859253a66e6836e73685d3dcc623">_time_str</link>,&#32;100,&#32;<emphasis role="stringliteral">&quot;(%x)&#32;%X&quot;</emphasis>,&#32;localtime(&amp;rt));
<anchor xml:id="_logs_8c_source_1l00012"/>00012 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;<link linkend="_logs_8c_1a43a0859253a66e6836e73685d3dcc623">_time_str</link>;
<anchor xml:id="_logs_8c_source_1l00013"/>00013 }
<anchor xml:id="_logs_8c_source_1l00014"/>00014 
<anchor xml:id="_logs_8c_source_1l00015"/><link linkend="_logs_8c_1a87886567426a509453e5709bb2ff785b">00015</link> <link linkend="_file___i_o_8h_1aaa4f66633ab727c9d841db141c3da088">file_t</link>*&#32;<link linkend="_logs_8c_1a87886567426a509453e5709bb2ff785b">log_fptr</link>;
<anchor xml:id="_logs_8c_source_1l00016"/>00016 
<anchor xml:id="_logs_8c_source_1l00017"/><link linkend="_logs_8h_1a0b7cf426e0ba603b54206d70e4c93f04">00017</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_logs_8c_1a0b7cf426e0ba603b54206d70e4c93f04">Log_init</link>()&#32;{
<anchor xml:id="_logs_8c_source_1l00018"/>00018 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(!<link linkend="_logs_8c_1a87e78d2e71f0d53d7886e1a126f39b16">log_file</link>){
<anchor xml:id="_logs_8c_source_1l00019"/>00019 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>;
<anchor xml:id="_logs_8c_source_1l00020"/>00020 &#32;&#32;&#32;&#32;}
<anchor xml:id="_logs_8c_source_1l00021"/>00021 
<anchor xml:id="_logs_8c_source_1l00022"/>00022 &#32;&#32;&#32;&#32;<link linkend="_logs_8c_1a87886567426a509453e5709bb2ff785b">log_fptr</link>&#32;=&#32;(<link linkend="_file___i_o_8h_1aaa4f66633ab727c9d841db141c3da088">file_t</link>*)&#32;<link linkend="_file___i_o_8h_1a05d25080a4592a86386f6d0d3d48496c">F_OPEN</link>(<link linkend="_logs_8c_1a87e78d2e71f0d53d7886e1a126f39b16">log_file</link>,&#32;<link linkend="_file___i_o_8h_1a588666511dde277029c4c5afc30782a6af38784ef4b08f294d4a78f62181729a0">APPEND</link>);
<anchor xml:id="_logs_8c_source_1l00023"/>00023 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>(<link linkend="_logs_8c_1a87886567426a509453e5709bb2ff785b">log_fptr</link>)
<anchor xml:id="_logs_8c_source_1l00024"/>00024 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;fprintf(<link linkend="_logs_8c_1a87886567426a509453e5709bb2ff785b">log_fptr</link>,&#32;<emphasis role="stringliteral">&quot;[%s]&#32;Opened&#32;Log\n&quot;</emphasis>,&#32;<link linkend="_logs_8c_1a89eb41300c751659cb27ad5955449bdc">_GET_PRINT_TIME</link>());
<anchor xml:id="_logs_8c_source_1l00025"/>00025 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>
<anchor xml:id="_logs_8c_source_1l00026"/>00026 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;printf(<emphasis role="stringliteral">&quot;[%s]&#32;Failed&#32;to&#32;Open&#32;Log\n&quot;</emphasis>,&#32;<link linkend="_logs_8c_1a89eb41300c751659cb27ad5955449bdc">_GET_PRINT_TIME</link>());
<anchor xml:id="_logs_8c_source_1l00027"/>00027 }
<anchor xml:id="_logs_8c_source_1l00028"/>00028 
<anchor xml:id="_logs_8c_source_1l00029"/><link linkend="_logs_8h_1ad02317523a9dd7b5180cccbc0371ac6a">00029</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_logs_8c_1ad02317523a9dd7b5180cccbc0371ac6a">Log_close</link>()&#32;{
<anchor xml:id="_logs_8c_source_1l00030"/>00030 &#32;&#32;&#32;&#32;<link linkend="_logs_8c_1a61353ebf0328d8bd1f61f224305e64bb">Log_add</link>(<emphasis role="stringliteral">&quot;Stopped&#32;Logging\n&quot;</emphasis>);
<anchor xml:id="_logs_8c_source_1l00031"/>00031 &#32;&#32;&#32;&#32;<link linkend="_file___i_o_8h_1ad62e6a72675aa7b389460e97f4e6d998">F_CLOSE</link>(<link linkend="_logs_8c_1a87886567426a509453e5709bb2ff785b">log_fptr</link>);
<anchor xml:id="_logs_8c_source_1l00032"/>00032 }
<anchor xml:id="_logs_8c_source_1l00033"/>00033 
<anchor xml:id="_logs_8c_source_1l00034"/><link linkend="_logs_8h_1a61353ebf0328d8bd1f61f224305e64bb">00034</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_logs_8c_1a61353ebf0328d8bd1f61f224305e64bb">Log_add</link>(<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">char</emphasis>*&#32;text){
<anchor xml:id="_logs_8c_source_1l00035"/>00035 &#32;&#32;&#32;&#32;fprintf(<link linkend="_logs_8c_1a87886567426a509453e5709bb2ff785b">log_fptr</link>,&#32;<emphasis role="stringliteral">&quot;[%s]&#32;UPDATE:&#32;%s\n&quot;</emphasis>,&#32;<link linkend="_logs_8c_1a89eb41300c751659cb27ad5955449bdc">_GET_PRINT_TIME</link>(),&#32;text);
<anchor xml:id="_logs_8c_source_1l00036"/>00036 }
<anchor xml:id="_logs_8c_source_1l00037"/>00037 
<anchor xml:id="_logs_8c_source_1l00038"/><link linkend="_logs_8h_1ad795690a809192117add6898be812267">00038</link> <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="_logs_8c_1ad795690a809192117add6898be812267">Log_error</link>(<emphasis role="keywordtype">char</emphasis>*&#32;text){
<anchor xml:id="_logs_8c_source_1l00039"/>00039 &#32;&#32;&#32;&#32;fprintf(<link linkend="_logs_8c_1a87886567426a509453e5709bb2ff785b">log_fptr</link>,&#32;<emphasis role="stringliteral">&quot;[%s]&#32;ERROR:&#32;%s\n&quot;</emphasis>,&#32;<link linkend="_logs_8c_1a89eb41300c751659cb27ad5955449bdc">_GET_PRINT_TIME</link>(),&#32;text);
<anchor xml:id="_logs_8c_source_1l00040"/>00040 }
</programlisting></section>
