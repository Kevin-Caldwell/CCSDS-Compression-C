\doxysection{reconstructor.\+c}
\hypertarget{reconstructor_8c_source}{}\label{reconstructor_8c_source}\index{src/reconstructor.c@{src/reconstructor.c}}
\mbox{\hyperlink{reconstructor_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{reconstructor_8h}{decompressor/reconstructor.h}}"{}}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <time.h>}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00004}00004\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00005}\mbox{\hyperlink{reconstructor_8c_af83a02e01aaaa90418285249879dd545}{00005}}\ \mbox{\hyperlink{structimage}{image}}\ *\mbox{\hyperlink{reconstructor_8c_af83a02e01aaaa90418285249879dd545}{sample}};}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00006}\mbox{\hyperlink{reconstructor_8h_ad0d5b55646a3018075f07ae472ddb312}{00006}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{reconstructor_8c_ad0d5b55646a3018075f07ae472ddb312}{Reconstructor}}(\mbox{\hyperlink{structimage}{image}}\ *predicted\_values,\ \mbox{\hyperlink{structimage}{image}}\ *reconstructed,\ FILE*\ file\_ptr)}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00007}00007\ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00008}00008\ \ \ \ \ \mbox{\hyperlink{constants_8h_af84e7b9bd8c4fa1203b0040adf941d8d}{InitalizeImageConstants}}(predicted\_values-\/>\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00009}00009\ \ \ \ \ \mbox{\hyperlink{load__constants_8h_a5d642038360b72b886a5eb66e3efd14a}{LoadConstantFile}}(\mbox{\hyperlink{global__constants_8h_a7a8fe096cc3b24ddabd9b150f4f5bdd7}{PREDICTOR\_CONSTANTS\_LOCATION}},\ \&\mbox{\hyperlink{global__constants_8h_a3e84b5148948a9a22f804ac78d16590c}{predictor\_constants}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00010}00010\ \ \ \ \ \mbox{\hyperlink{constants_8h_a6acd65af9a2f057ad3f0891038799e5b}{InitalizePredictorConstants}}();}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00011}00011\ \ \ \ \ time\_t\ start;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00012}00012\ \ \ \ \ time\_t\ end;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00013}00013\ \ \ \ \ \mbox{\hyperlink{structdim3}{dim3}}\ size\ =\ predicted\_values-\/>\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}};}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00014}00014\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00015}00015\ \ \ \ \ start\ =\ time(\mbox{\hyperlink{math__functions_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00016}00016\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ z\ =\ 0;\ z\ <\ size.\mbox{\hyperlink{structdim3_a369004c0d58468e2b5a09c22d6608e1b}{z}};\ z++)}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00017}00017\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00018}00018\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!\mbox{\hyperlink{constants_8h_aee5860bd3e62fe2734ce27a1b1038dbc}{PREDICTION\_MODE}})}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00019}00019\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00020}00020\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{constants_8h_a5464533d23b59ba11030432e73528730}{C}}\ =\ \mbox{\hyperlink{reconstructor_8h_a2fee6f8dd7f3cd3ed1ae75161294c4c4}{Ps}}(z)\ +\ 3;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00021}00021\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00022}00022\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00023}00023\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00024}00024\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{constants_8h_a5464533d23b59ba11030432e73528730}{C}}\ =\ \mbox{\hyperlink{reconstructor_8h_a2fee6f8dd7f3cd3ed1ae75161294c4c4}{Ps}}(z);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00025}00025\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00026}00026\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ y\ =\ 0;\ y\ <\ size.\mbox{\hyperlink{structdim3_a2be1654d9b9e6915687f11ac13ef2f8b}{y}};\ y++)}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00027}00027\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00028}00028\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ x\ =\ 0;\ x\ <\ size.\mbox{\hyperlink{structdim3_a098d7fd50051a60dd6764a3b94978064}{x}};\ x++)}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00029}00029\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00030}00030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{reconstructor_8c_aeb6c4d18e6fc666235f8ef7464d1ae29}{ReconstructPixel}}(predicted\_values,\ reconstructed,\ z,\ y,\ x,\ file\_ptr);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00032}00032\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00033}00033\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00034}00034\ \ \ \ \ \ \ \ \ time\_t\ time\_elapsed\ =\ time(\mbox{\hyperlink{math__functions_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}})\ -\/\ start;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00035}00035\ \ \ \ \ \ \ \ \ time\_t\ time\_left\ =\ time\_elapsed\ *\ (\mbox{\hyperlink{constants_8h_a7a7576e08f5980d322da5f48c7385edc}{Nz}}\ -\/\ z\ -\/\ 1)\ /\ (z\ +\ 1);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00036}00036\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}\(\backslash\)rPredicted\ \%d/\%d\ of\ Image.\ (\%ld\ seconds\ Elapsed,\ \%ld\ seconds\ Left)"{}},\ (\textcolor{keywordtype}{int})(z\ +\ 1),\ (\textcolor{keywordtype}{int})size.\mbox{\hyperlink{structdim3_a369004c0d58468e2b5a09c22d6608e1b}{z}},\ time\_elapsed,\ time\_left);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00037}00037\ \ \ \ \ \ \ \ \ fflush(stdout);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00038}00038\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00039}00039\ \ \ \ \ end\ =\ time(\mbox{\hyperlink{math__functions_8h_a070d2ce7b6bb7e5c05602aa8c308d0c4}{NULL}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00040}00040\ \ \ \ \ printf(\textcolor{stringliteral}{"{}\(\backslash\)n\%d\ seconds\ for\ image\ prediction.\(\backslash\)n"{}},\ (\textcolor{keywordtype}{int})(end\ -\/\ start));}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00041}00041\ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00042}00042\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00043}\mbox{\hyperlink{reconstructor_8h_a939a70de0c04a2c4e970e4c242ff0f21}{00043}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{reconstructor_8c_aeb6c4d18e6fc666235f8ef7464d1ae29}{ReconstructPixel}}(\mbox{\hyperlink{structimage}{image}}\ *mapped,\ \mbox{\hyperlink{structimage}{image}}\ *data,\ \mbox{\hyperlink{math__functions_8h_affb1df897d26e77d96c613bea67825c6}{INDEX}}\ z,\ \mbox{\hyperlink{math__functions_8h_affb1df897d26e77d96c613bea67825c6}{INDEX}}\ y,\ \mbox{\hyperlink{math__functions_8h_affb1df897d26e77d96c613bea67825c6}{INDEX}}\ x,\ FILE*\ file\_ptr)}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00044}00044\ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00045}00045\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ ==\ 0\ \&\&\ y\ ==\ 0)}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00046}00046\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00047}00047\ \ \ \ \ \ \ \ \ free(\mbox{\hyperlink{cache__predictor_8h_a8dc01c7173e49a14ae38a59d91b9d669}{global\_cache}}-\/>\mbox{\hyperlink{struct_predictor_cache_a8ffc318fbdca60414a190de33e244826}{weights}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00048}00048\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{weights_8h_adcc753ae7048085817bd2c37b471f739}{InitializeWeights}}(\&\mbox{\hyperlink{cache__predictor_8h_a8dc01c7173e49a14ae38a59d91b9d669}{global\_cache}}-\/>\mbox{\hyperlink{struct_predictor_cache_a8ffc318fbdca60414a190de33e244826}{weights}},\ z,\ y,\ x);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00049}00049\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00050}00050\ \ \ \ \ \mbox{\hyperlink{linear__algebra_8h_a5acabcf9a2b0d843de53680562e2f639}{data\_t}}\ mapped\_data\ =\ \mbox{\hyperlink{image_8h_a78477801fe183cdf32e60df1c92b7320}{GetPixel}}(mapped,\ x,\ y,\ z);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00051}00051\ \ \ \ \ uint16\_t\ local\_sum\ =\ \mbox{\hyperlink{local__sum_8h_a1f0a6a3443597dab4881bb94fbc35f41}{FindLocalSum}}(data,\ z,\ y,\ x);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00052}00052\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00053}00053\ \ \ \ \ int64\_t\ predicted\_central\_local\_difference\ =\ \mbox{\hyperlink{local__differences_8h_a36ddae4ef0f34ba3f7402469253bb6b6}{PredictedCentralLocalDifference}}(data,\ z,\ y,\ x);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00054}00054\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00055}00055\ \ \ \ \ int64\_t\ high\_resolution\_predicted\_sample\ =\ \mbox{\hyperlink{sample__representative_8h_a441e8d0fe639d45889aab5b88c4138f4}{HighResolutionPredictedSample}}(predicted\_central\_local\_difference,\ local\_sum);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00056}00056\ \ \ \ \ int32\_t\ double\_resolution\_predicted\_sample\ =\ \mbox{\hyperlink{sample__representative_8h_a6c60474c610dc64773816bc445efeb77}{DoubleResolutionPredictedSample}}(data,\ z,\ y,\ x,\ high\_resolution\_predicted\_sample);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00058}00058\ \ \ \ \ uint16\_t\ predicted\_sample\ =\ \mbox{\hyperlink{sample__representative_8h_a14cff7c59ac94b0387e8b95a433521e9}{PredictedSample}}(double\_resolution\_predicted\_sample);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00059}00059\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00060}00060\ \ \ \ \ int32\_t\ delta\ =\ \mbox{\hyperlink{quantizer_8h_ae85d34759565d8a3ab498494786c395b}{QuantizerIndexUnmapper}}(mapped\_data,}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00061}00061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ predicted\_sample,}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00062}00062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ double\_resolution\_predicted\_sample);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00063}00063\ \ \ \ \ uint16\_t\ clipped\_quantizer\_bin\_center\ =\ \mbox{\hyperlink{quantizer_8h_a9d745aa249b8a9cde3f83899b563dcc5}{ClippedQuantizerBinCenter}}(predicted\_sample\ +\ delta);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00064}00064\ \ \ \ \ int32\_t\ double\_resolution\_predicted\_error\ =\ \mbox{\hyperlink{weights_8h_a286baab1384ff25cf7cf4c2061f15c4c}{DoubleResolutionPredictionError}}(clipped\_quantizer\_bin\_center,}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00065}00065\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ double\_resolution\_predicted\_sample);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00066}00066\ \ \ \ \ \textcolor{comment}{//\ int32\_t\ double\_resolution\_predicted\_error\ =\ 2\ *\ (predicted\_sample\ +\ delta)\ -\/\ double\_resolution\_predicted\_error}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00067}00067\ \ \ \ \ \mbox{\hyperlink{image_8h_aefaa1253ccc17864ac32b9d685b821d4}{SetPixel}}(data,\ x,\ y,\ z,\ (uint16\_t)predicted\_sample\ +\ delta);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00068}00068\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00069}00069\ \ \ \ \ \mbox{\hyperlink{weights_8h_a805706f7af2f212bc46076319fcec535}{UpdateWeights}}(data,\ \mbox{\hyperlink{cache__predictor_8h_a8dc01c7173e49a14ae38a59d91b9d669}{global\_cache}}-\/>\mbox{\hyperlink{struct_predictor_cache_a8ffc318fbdca60414a190de33e244826}{weights}},\ z,\ y,\ x,\ double\_resolution\_predicted\_error);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00070}00070\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00071}00071\ \ \ \ \ \textcolor{keywordtype}{char}\ write\_buffer[1000];}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00072}00072\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00073}00073\ \ \ \ \ \textcolor{comment}{//\ sprintf(write\_buffer,\ "{}(\%d,\%d,\%d),\%d,\ \%d,\ \%d\(\backslash\)n"{},\ \ x,\ y,\ z,\ delta\ +\ predicted\_sample,\ predicted\_sample,\ delta);}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00075}00075\ \ \ \ \ sprintf(write\_buffer,\ \textcolor{stringliteral}{"{}(\%d,\%d,\%d),\%u,\ \%d,\ \%d,\ \%ld,\ \%d,\ \%ld,\ ["{}},\ x,\ y,\ z,\ delta\ +\ predicted\_sample,\ predicted\_sample,\ mapped\_data,\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00076}00076\ \ \ \ \ \ \ \ \ predicted\_central\_local\_difference,\ double\_resolution\_predicted\_sample,\ high\_resolution\_predicted\_sample);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00077}00077\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00078}00078\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{constants_8h_a5464533d23b59ba11030432e73528730}{C}};\ i++)}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00079}00079\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00080}00080\ \ \ \ \ \ \ \ \ sprintf(write\_buffer\ +\ strlen(write\_buffer),\ \textcolor{stringliteral}{"{}\%d,"{}},\ \mbox{\hyperlink{cache__predictor_8h_a8dc01c7173e49a14ae38a59d91b9d669}{global\_cache}}-\/>\mbox{\hyperlink{struct_predictor_cache_a8ffc318fbdca60414a190de33e244826}{weights}}[i]);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00081}00081\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00082}00082\ \ \ \ \ sprintf(write\_buffer\ +\ strlen(write\_buffer),\ \textcolor{stringliteral}{"{}]\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00083}00083\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00084}00084\ \ \ \ \ sprintf(write\_buffer\ +\ strlen(write\_buffer),\ \textcolor{stringliteral}{"{}UpdateWeights\ args:\ \%d\ \%d\ \%d\ \%d\(\backslash\)n"{}},\ z,\ y,\ x,\ double\_resolution\_predicted\_error);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00085}00085\ \ \ \ \ \mbox{\hyperlink{file___i_o_8h_a94d988ea4ce93357f56c0191584246a6}{F\_WRITE}}(write\_buffer,\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{char}),\ strlen(write\_buffer),\ file\_ptr);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00086}00086\ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00087}00087\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00088}\mbox{\hyperlink{reconstructor_8h_aadb567bbc159d00d6334e2eb36e6e253}{00088}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{reconstructor_8c_aadb567bbc159d00d6334e2eb36e6e253}{TestReconstructor}}(\textcolor{keywordtype}{char}\ *file\_name)}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00089}00089\ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00090}00090\ \ \ \ \ \mbox{\hyperlink{file___i_o_8h_aaa4f66633ab727c9d841db141c3da088}{file\_t}}*\ file\_ptr;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00091}00091\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00092}00092\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Testing\ Reconstructor...\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00093}00093\ \ \ \ \ \mbox{\hyperlink{structimage}{image}}\ sample\_data;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00094}00094\ \ \ \ \ \mbox{\hyperlink{csv-io_8h_aba677341d6fd704867c56e0b5d6f3fc3}{ReadImageFromCSV}}(\&sample\_data,\ file\_name);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00095}00095\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Finished\ Reading\ Image.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00096}00096\ \ \ \ \ \mbox{\hyperlink{reconstructor_8c_af83a02e01aaaa90418285249879dd545}{sample}}\ =\ \&sample\_data;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00097}00097\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00098}00098\ \ \ \ \ \mbox{\hyperlink{structimage}{image}}\ predicted\_data;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00099}00099\ \ \ \ \ \mbox{\hyperlink{image_8h_a61b8047c5bba5a89979d65847e4103b1}{InitImage}}(\&predicted\_data,\ sample\_data.\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}}.\mbox{\hyperlink{structdim3_a098d7fd50051a60dd6764a3b94978064}{x}},\ sample\_data.\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}}.\mbox{\hyperlink{structdim3_a2be1654d9b9e6915687f11ac13ef2f8b}{y}},\ sample\_data.\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}}.\mbox{\hyperlink{structdim3_a369004c0d58468e2b5a09c22d6608e1b}{z}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00100}00100\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00101}00101\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Running\ Predictor...\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00102}00102\ \ \ \ \ fflush(stdout);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00103}00103\ \ \ \ \ \mbox{\hyperlink{cache__predictor_8h_a400e6cd529a6a1ca3901be57ab88fb63}{InitializePredictorCache}}(\&\mbox{\hyperlink{cache__predictor_8h_a8dc01c7173e49a14ae38a59d91b9d669}{global\_cache}},\ \&sample\_data);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00104}00104\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Cache\ Created..\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00105}00105\ \ \ \ \ \mbox{\hyperlink{predictor_8h_a4a94804509574a94d896a4164802bcd2}{RunPredictor}}(\&sample\_data,\ \&predicted\_data);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00106}00106\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Completed\ Prediction.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00107}00107\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00108}00108\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Logging\ to\ logs/c-\/debug.LOG.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00109}00109\ \ \ \ \ file\_ptr\ =\ \mbox{\hyperlink{file___i_o_8h_a05d25080a4592a86386f6d0d3d48496c}{F\_OPEN}}(\textcolor{stringliteral}{"{}../data/logs/c-\/reconstructor-\/debug.LOG"{}},\ \mbox{\hyperlink{file___i_o_8h_a588666511dde277029c4c5afc30782a6a61aa7ff70b76bff0fda378cf61d6afbc}{WRITE}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00110}00110\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00111}00111\ \ \ \ \ \mbox{\hyperlink{structimage}{image}}\ reconstructed\_data;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00112}00112\ \ \ \ \ \mbox{\hyperlink{image_8h_a61b8047c5bba5a89979d65847e4103b1}{InitImage}}(\&reconstructed\_data,\ sample\_data.\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}}.\mbox{\hyperlink{structdim3_a098d7fd50051a60dd6764a3b94978064}{x}},\ sample\_data.\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}}.\mbox{\hyperlink{structdim3_a2be1654d9b9e6915687f11ac13ef2f8b}{y}},\ sample\_data.\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}}.\mbox{\hyperlink{structdim3_a369004c0d58468e2b5a09c22d6608e1b}{z}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00113}00113\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00114}00114\ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 0;\ i\ <\ \mbox{\hyperlink{reconstructor_8c_af83a02e01aaaa90418285249879dd545}{sample}}-\/>\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}}.\mbox{\hyperlink{structdim3_a098d7fd50051a60dd6764a3b94978064}{x}}\ *\ \mbox{\hyperlink{reconstructor_8c_af83a02e01aaaa90418285249879dd545}{sample}}-\/>\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}}.\mbox{\hyperlink{structdim3_a2be1654d9b9e6915687f11ac13ef2f8b}{y}}\ *\ \mbox{\hyperlink{reconstructor_8c_af83a02e01aaaa90418285249879dd545}{sample}}-\/>\mbox{\hyperlink{structimage_a92c57811a03d78e56a6e8592f96a41ad}{size}}.\mbox{\hyperlink{structdim3_a369004c0d58468e2b5a09c22d6608e1b}{z}};\ i++)\{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00115}00115\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#ifndef\ MEMORY\_SAVING}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00116}00116\ \ \ \ \ \ \ \ \ reconstructed\_data.\mbox{\hyperlink{structimage_a53d0e0aad601020b80d8266c2d9f8462}{data}}[i]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00117}00117\ \textcolor{preprocessor}{\ \ \ \ \ \ \ \ \#endif}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00118}00118\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00119}00119\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00120}00120\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Running\ Reconstructor...\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00121}00121\ \ \ \ \ \mbox{\hyperlink{reconstructor_8c_ad0d5b55646a3018075f07ae472ddb312}{Reconstructor}}(\&predicted\_data,\ \&reconstructed\_data,\ file\_ptr);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00122}00122\ \ \ \ \ printf(\textcolor{stringliteral}{"{}Completed\ Reconstruction.\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00123}00123\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00124}00124\ \ \ \ \ \textcolor{keywordtype}{int}\ res\ =\ \mbox{\hyperlink{image_8h_a1aeeb4864b63110b92099384a7a21fa8}{Image\_Equals}}(\&sample\_data,\ \&reconstructed\_data);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00125}00125\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00126}00126\ \ \ \ \ \textcolor{keywordflow}{if}\ (res\ ==\ INT32\_MAX)}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00127}00127\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00128}00128\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Reconstruction\ Success!\(\backslash\)n"{}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00129}00129\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00130}00130\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00131}00131\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00132}00132\ \ \ \ \ \ \ \ \ printf(\textcolor{stringliteral}{"{}Reconstruction\ Failed\ at\ i=\ \%d.\(\backslash\)n"{}},\ res);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00133}00133\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00134}00134\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00135}00135\ \ \ \ \ \mbox{\hyperlink{file___i_o_8h_ad62e6a72675aa7b389460e97f4e6d998}{F\_CLOSE}}(file\_ptr);}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00136}00136\ }
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00137}00137\ \textcolor{preprocessor}{\ \ \ \ \#ifndef\ MEMORY\_SAVING}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00138}00138\ \ \ \ \ free(sample\_data.\mbox{\hyperlink{structimage_a53d0e0aad601020b80d8266c2d9f8462}{data}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00139}00139\ \ \ \ \ free(predicted\_data.\mbox{\hyperlink{structimage_a53d0e0aad601020b80d8266c2d9f8462}{data}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00140}00140\ \ \ \ \ free(reconstructed\_data.\mbox{\hyperlink{structimage_a53d0e0aad601020b80d8266c2d9f8462}{data}});}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00141}00141\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{\Hypertarget{reconstructor_8c_source_l00142}00142\ \}}

\end{DoxyCode}
