\doxysection{stream\+\_\+encoder.\+c}
\hypertarget{stream__encoder_8c_source}{}\label{stream__encoder_8c_source}\index{src/stream\_encoder.c@{src/stream\_encoder.c}}
\mbox{\hyperlink{stream__encoder_8c}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{stream__encoder_8h}{encoder/stream\_encoder.h}}"{}}}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00002}00002\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00003}\mbox{\hyperlink{stream__encoder_8h_a0db4a8ab23a4af63c99d5fbfca9073eb}{00003}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{stream__encoder_8c_a0db4a8ab23a4af63c99d5fbfca9073eb}{InitializeVarIntStream}}(\mbox{\hyperlink{struct_var_int_file_stream}{VIFS}}\ *stream,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *file\_name,\ uint32\_t\ buffer\_size)}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00004}00004\ \{}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00006}00006\ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a1e5757374503c98182efdc688999f91f}{bit\_ptr}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00007}00007\ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a97ecce5e0a58b1ab0ac947547d0ae8f3}{byte\_ptr}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00008}00008\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00009}00009\ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_ab10afab4dbcbfc99227c63ee0ae694ff}{fs}}\ =\ \mbox{\hyperlink{file___i_o_8h_a05d25080a4592a86386f6d0d3d48496c}{F\_OPEN}}(file\_name,\ \mbox{\hyperlink{file___i_o_8h_a588666511dde277029c4c5afc30782a6a61aa7ff70b76bff0fda378cf61d6afbc}{WRITE}});}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00010}00010\ \}}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00011}00011\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00012}\mbox{\hyperlink{stream__encoder_8h_a8b42309d51939ee46f5f0d348fbbcbc0}{00012}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{stream__encoder_8c_a8b42309d51939ee46f5f0d348fbbcbc0}{StreamVarInteger}}(\mbox{\hyperlink{struct_var_int_file_stream}{VIFS}}\ *stream,\ uint32\_t\ data,\ uint32\_t\ length)}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00013}00013\ \{}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00014}00014\ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a1e5757374503c98182efdc688999f91f}{bit\_ptr}}\ +=\ length;}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00015}00015\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00016}00016\ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a35cba028c7b885581f278e533cfc4147}{buffer}}[stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a97ecce5e0a58b1ab0ac947547d0ae8f3}{byte\_ptr}}]\ |=\ \mbox{\hyperlink{stream__encoder_8h_abc23dc7967a47b4db3efff8237ef3a2f}{L\_SHIFT}}(data,\ (\mbox{\hyperlink{stream__encoder_8h_a548781ef0de810de1f925dff4d5d3f9a}{BUFFER\_REG\_SIZE}}\ -\/\ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a1e5757374503c98182efdc688999f91f}{bit\_ptr}}));}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00018}00018\ \ \ \ \ uint32\_t\ a\ =\ (2\ *\ \mbox{\hyperlink{stream__encoder_8h_a548781ef0de810de1f925dff4d5d3f9a}{BUFFER\_REG\_SIZE}}\ -\/\ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a1e5757374503c98182efdc688999f91f}{bit\_ptr}});}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00019}00019\ \ \ \ \ \textcolor{keywordflow}{if}\ (a\ <\ \mbox{\hyperlink{stream__encoder_8h_a548781ef0de810de1f925dff4d5d3f9a}{BUFFER\_REG\_SIZE}})}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00020}00020\ \ \ \ \ \{}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00021}00021\ \ \ \ \ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a35cba028c7b885581f278e533cfc4147}{buffer}}[stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a97ecce5e0a58b1ab0ac947547d0ae8f3}{byte\_ptr}}\ +\ 1]\ |=\ (data\ <<\ a);}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00022}00022\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00023}00023\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00024}00024\ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a97ecce5e0a58b1ab0ac947547d0ae8f3}{byte\_ptr}}\ +=\ (stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a1e5757374503c98182efdc688999f91f}{bit\_ptr}}\ >=\ \mbox{\hyperlink{stream__encoder_8h_a548781ef0de810de1f925dff4d5d3f9a}{BUFFER\_REG\_SIZE}});}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00025}00025\ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a1e5757374503c98182efdc688999f91f}{bit\_ptr}}\ \%=\ \mbox{\hyperlink{stream__encoder_8h_a548781ef0de810de1f925dff4d5d3f9a}{BUFFER\_REG\_SIZE}};}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00026}00026\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00027}00027\ \ \ \ \ \textcolor{keywordflow}{if}(!(stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a97ecce5e0a58b1ab0ac947547d0ae8f3}{byte\_ptr}}\ <\ \mbox{\hyperlink{stream__encoder_8h_af7b7dc9a200cb1404c280bd500fd1551}{BUFFER\_LENGTH}}\ -\/\ 1))\{}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00028}00028\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{file___i_o_8h_a94d988ea4ce93357f56c0191584246a6}{F\_WRITE}}(stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a35cba028c7b885581f278e533cfc4147}{buffer}},\ \textcolor{keyword}{sizeof}(uint32\_t),\ \mbox{\hyperlink{stream__encoder_8h_af7b7dc9a200cb1404c280bd500fd1551}{BUFFER\_LENGTH}}-\/1,\ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_ab10afab4dbcbfc99227c63ee0ae694ff}{fs}});}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00029}00029\ \ \ \ \ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a35cba028c7b885581f278e533cfc4147}{buffer}}[0]\ =\ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a35cba028c7b885581f278e533cfc4147}{buffer}}[stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a97ecce5e0a58b1ab0ac947547d0ae8f3}{byte\_ptr}}];}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00030}00030\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int}\ i\ =\ 1;\ i\ <\ \mbox{\hyperlink{stream__encoder_8h_af7b7dc9a200cb1404c280bd500fd1551}{BUFFER\_LENGTH}};\ i++)\{}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00031}00031\ \ \ \ \ \ \ \ \ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a35cba028c7b885581f278e533cfc4147}{buffer}}[i]\ =\ 0;}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00032}00032\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00033}00033\ \ \ \ \ \ \ \ \ stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_a97ecce5e0a58b1ab0ac947547d0ae8f3}{byte\_ptr}}\ =\ 0;}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00034}00034\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00035}00035\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00036}00036\ \}}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00038}\mbox{\hyperlink{stream__encoder_8h_afbd717a2dd8bee43593e06a3919ba72a}{00038}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{stream__encoder_8c_afbd717a2dd8bee43593e06a3919ba72a}{CloseVarIntegerStream}}(\mbox{\hyperlink{struct_var_int_file_stream}{VIFS}}*\ stream)\{}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00039}00039\ \ \ \ \ \mbox{\hyperlink{file___i_o_8h_ad62e6a72675aa7b389460e97f4e6d998}{F\_CLOSE}}(stream-\/>\mbox{\hyperlink{struct_var_int_file_stream_ab10afab4dbcbfc99227c63ee0ae694ff}{fs}});}
\DoxyCodeLine{\Hypertarget{stream__encoder_8c_source_l00040}00040\ \}}

\end{DoxyCode}
